<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>è¸¹è¸¹ (TryTry) é…·ç‚«ç‰ˆåŸå‹</title>
    <style>
        /* --- å…¨å±€é…·ç‚«é£æ ¼å®šä¹‰ --- */
        :root {
            /* èƒŒæ™¯æµå…‰æ¸å˜ */
            --bg-gradient: linear-gradient(135deg, #1a0b2e 0%, #0f172a 50%, #2a0845 100%);
            
            /* æ¯›ç»ç’ƒå¡ç‰‡èƒŒæ™¯ */
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-blur: blur(20px);

            --text-main: #ffffff;
            --text-sub: #d1d5db;
            
            /* éœ“è™¹å¼ºè°ƒè‰² */
            --neon-blue: #00f2ff;
            --neon-purple: #bd00ff;
            --neon-orange: #ff7b00;
            --neon-red: #ff4d4d;
            --neon-green: #00ff9d;
            
            /* æŒ‰é’®æ¸å˜ */
            --btn-try-grad: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
            --btn-buy-grad: linear-gradient(90deg, #ff4d4d, var(--neon-orange));
        }

        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #000; /*å…œåº•*/
            background-image: var(--bg-gradient);
            background-attachment: fixed;
            color: var(--text-main);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        /* æ‰‹æœºå¤–å£³å¢åŠ å‘å…‰æ•ˆæœ */
        #app-container {
            width: 375px;
            height: 812px;
            background: transparent; /* é€æ˜ä»¥æ˜¾ç¤ºèƒŒæ™¯ */
            position: relative;
            overflow: hidden;
            border-radius: 40px;
            box-shadow: 0 0 60px rgba(189, 0, 255, 0.3), inset 0 0 20px rgba(255,255,255,0.1);
            border: 4px solid rgba(255,255,255,0.1);
        }

        /* é€šç”¨æ¯›ç»ç’ƒç±» */
        .glass {
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
        }

        .page {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0; left: 0;
            display: none;
            flex-direction: column;
            overflow-y: auto;
            animation: fadeIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* æ›´æœ‰å¼¹æ€§çš„åŠ¨ç”» */
            background: transparent;
        }
        .page.active { display: flex; }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        /* å¯¼èˆªæ æ¯›ç»ç’ƒ */
        .navbar {
            padding: 20px 20px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(20, 10, 40, 0.6); /* æ›´æ·±ä¸€ç‚¹ */
            backdrop-filter: blur(20px);
            z-index: 10;
            position: sticky; top: 0;
            border-bottom: 1px solid var(--glass-border);
        }
        .logo { 
            font-weight: 900; font-size: 1.4rem; letter-spacing: 1px;
            background: var(--btn-try-grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(0, 242, 255, 0.3);
        }

        /* --- é¦–é¡µ (Home) --- */
        .hero-banner {
            margin: 20px; height: 200px;
            /* ä½¿ç”¨æ›´é…·ç‚«çš„å ä½å›¾æˆ–æ¸å˜å åŠ  */
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent), url('https://picsum.photos/id/1041/600/350') center/cover;
            border-radius: 20px;
            display: flex; align-items: flex-end; padding: 20px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.1);
        }
        .hero-text h2 { margin: 0; font-size: 1.5rem; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .hero-tag {
            background: var(--btn-try-grad); padding: 4px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: bold;
            position: absolute; top: 15px; right: 15px; box-shadow: 0 0 10px var(--neon-purple);
        }
        
        .icon-grid { display: flex; justify-content: space-around; padding: 15px 0; }
        .icon-item { display: flex; flex-direction: column; align-items: center; font-size: 0.75rem; color: var(--text-main); }
        /* å›¾æ ‡å‡çº§ä¸ºå¤šå½©éœ“è™¹é£æ ¼ */
        .icon-box { 
            width: 50px; height: 50px; border-radius: 16px; margin-bottom: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
        }
        
        /* æ¸¸æˆå¡ç‰‡æ ·å¼ - å¢åŠ ç‚¹å‡»æ•ˆæœ */
        .game-card {
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 12px; display: flex; gap: 15px; margin-bottom: 15px; align-items: center;
            transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
            cursor: pointer;
        }
        .game-card:hover { 
            border-color: rgba(0, 242, 255, 0.3);
            box-shadow: 0 5px 20px rgba(0, 242, 255, 0.1);
        }
        .game-card:active { 
            transform: scale(0.98); 
            box-shadow: 0 2px 10px rgba(0, 242, 255, 0.2);
        }
        .game-thumb { 
            width: 80px; height: 80px; background: #334155; border-radius: 12px; object-fit: cover; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .game-tag { 
            font-size: 0.7rem; color: var(--neon-blue); background: rgba(0, 242, 255, 0.1); 
            padding: 2px 8px; border-radius: 4px; border: 1px solid rgba(0, 242, 255, 0.2);
            margin-top: 5px; display: inline-block;
        }
        
        /* å²ä½ä»·æ ‡ç­¾æ ·å¼ */
        .lowest-price-tag {
            font-size: 0.75rem;
            color: var(--neon-green);
            background: rgba(0, 255, 157, 0.1);
            padding: 3px 8px;
            border-radius: 4px;
            border: 1px solid rgba(0, 255, 157, 0.2);
            margin-top: 5px;
            display: inline-block;
            font-weight: bold;
            box-shadow: 0 0 8px rgba(0, 255, 157, 0.2);
            animation: priceGlow 2s infinite alternate;
        }
        
        @keyframes priceGlow {
            0% { box-shadow: 0 0 8px rgba(0, 255, 157, 0.2); }
            100% { box-shadow: 0 0 12px rgba(0, 255, 157, 0.4); }
        }
        
        /* é…·ç‚«æŒ‰é’® */
        .btn-try-sm {
            background: var(--btn-try-grad);
            color: white; border: none; padding: 8px 18px; border-radius: 20px; font-size: 0.8rem; font-weight: 700; cursor: pointer;
            box-shadow: 0 4px 15px rgba(189, 0, 255, 0.4);
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
            z-index: 2; /* é˜²æ­¢è¢«æ¸¸æˆå¡ç‰‡ç‚¹å‡»è¦†ç›– */
            position: relative;
        }
        .btn-try-sm.disabled {
            background: rgba(255,255,255,0.1); color: #aaa; box-shadow: none; border: 1px solid rgba(255,255,255,0.1);
        }

        /* --- è¯¦æƒ…é¡µ (Detail) --- */
        .detail-header {
            height: 300px;
            /* ä½¿ç”¨æ›´å…·åŠ¨æ„Ÿçš„èƒŒæ™¯å›¾ */
            background: url('https://picsum.photos/id/1002/600/400') center/cover;
            position: relative; display: flex; align-items: center; justify-content: center;
        }
        .play-btn-overlay {
            width: 60px; height: 60px; background: rgba(0,0,0,0.5); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
            border: 2px solid var(--text-main); backdrop-filter: blur(5px);
        }
        .detail-content { 
            padding: 25px 20px; 
            background: linear-gradient(to bottom, rgba(26, 11, 46, 0.9), transparent); /* æ¸å˜è¡”æ¥ */
            border-radius: 30px 30px 0 0; margin-top: -30px; z-index: 2; position: relative;
            backdrop-filter: blur(20px); border-top: 1px solid rgba(255,255,255,0.1);
        }
        .detail-title { font-size: 1.8rem; font-weight: 900; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .detail-tags { margin-bottom: 15px; }
        .detail-tags span { 
            margin-right: 10px; color: var(--neon-orange); font-weight: bold; font-size: 0.8rem; 
            background: rgba(255, 123, 0, 0.15); padding: 6px 10px; border-radius: 8px; 
            display: inline-block; margin-bottom: 5px;
        }
        
        /* è¯¦æƒ…é¡µå²ä½ä»·æ ·å¼ */
        .detail-price-info {
            margin: 15px 0;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .current-price {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--neon-red);
            text-shadow: 0 0 10px rgba(255, 77, 77, 0.5);
        }
        
        .original-price {
            font-size: 1rem;
            color: #aaa;
            text-decoration: line-through;
        }
        
        .lowest-price-badge {
            background: linear-gradient(135deg, rgba(0, 255, 157, 0.2), rgba(0, 200, 120, 0.1));
            border: 1px solid rgba(0, 255, 157, 0.3);
            color: var(--neon-green);
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 0.9rem;
            box-shadow: 0 0 15px rgba(0, 255, 157, 0.2);
            animation: pricePulse 3s infinite;
        }
        
        @keyframes pricePulse {
            0%, 100% { box-shadow: 0 0 15px rgba(0, 255, 157, 0.2); }
            50% { box-shadow: 0 0 20px rgba(0, 255, 157, 0.4); }
        }
        
        .sticky-footer {
            position: absolute; bottom: 0; width: 100%; padding: 20px;
            background: rgba(20, 10, 40, 0.8);
            backdrop-filter: blur(20px); border-top: 1px solid var(--glass-border);
            display: flex; gap: 15px; box-sizing: border-box;
        }
        /* è´­ä¹°æŒ‰é’®ï¼šéœ“è™¹æè¾¹é£æ ¼ */
        .btn-buy {
            flex: 1; background: transparent;
            border: 2px solid var(--neon-orange); color: var(--neon-orange);
            padding: 14px; border-radius: 12px; font-weight: 800; font-size: 1rem;
            box-shadow: 0 0 15px rgba(255, 123, 0, 0.2) inset;
            text-shadow: 0 0 5px rgba(255, 123, 0, 0.5);
        }
        /* è¯•ç©æŒ‰é’®ï¼šå¼ºåŠ›æ¸å˜å‘å…‰é£æ ¼ */
        .btn-try-lg {
            flex: 2; background: var(--btn-try-grad); border: none; color: white;
            padding: 14px; border-radius: 12px; font-weight: 800; font-size: 1.1rem;
            box-shadow: 0 0 30px rgba(189, 0, 255, 0.5); letter-spacing: 1px;
        }

        /* --- æ¸¸ç©é¡µ (Gameplay) - å…‰å½±æ‰‹æŸ„ --- */
        .gameplay-top-bar {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }
        
        .exit-game-btn {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.8rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
        }
        
        .exit-game-btn:hover {
            background: rgba(255, 0, 0, 0.3);
            border-color: rgba(255, 0, 0, 0.5);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.4);
        }
        
        .timer-float {
            background: rgba(0,0,0,0.7); backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.3); font-weight: bold; letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .timer-float.danger { 
            color: #ff3333; border-color: #ff3333; 
            box-shadow: 0 0 20px rgba(255, 51, 51, 0.5); animation: pulse 0.8s infinite; 
        }
        /* è™šæ‹Ÿæ‰‹æŸ„å‘å…‰ */
        .joystick { 
            border: 3px solid rgba(255,255,255,0.4); 
            box-shadow: 0 0 20px rgba(255,255,255,0.2), inset 0 0 20px rgba(255,255,255,0.1);
        }
        .joystick::after { background: rgba(255,255,255,0.8); box-shadow: 0 0 10px white; }
        .game-btn { 
            border: 3px solid rgba(255,255,255,0.4); background: rgba(255,255,255,0.1); backdrop-filter: blur(5px);
            box-shadow: 0 0 15px rgba(255,255,255,0.2); text-shadow: 0 0 5px white;
        }

        /* --- æ¸¸æˆç”»é¢åŠ¨æ€æ•ˆæœ --- */
        .gameplay-scene {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: #000;
        }
        
        /* åŠ¨æ€æ¸¸æˆèƒŒæ™¯ */
        .game-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #0c0c2e, #1a1a3e);
            z-index: 1;
        }
        
        /* æ˜Ÿç©ºæ•ˆæœ */
        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
        }
        
        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        /* åŠ¨æ€ç²’å­æ•ˆæœ */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3;
        }
        
        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background-color: var(--neon-blue);
            border-radius: 50%;
            opacity: 0.6;
        }
        
        /* æ¸¸æˆè§’è‰²/å…ƒç´  */
        .game-character {
            position: absolute;
            top: 50%;
            left: 30%;
            width: 100px;
            height: 150px;
            z-index: 5;
            filter: drop-shadow(0 0 10px rgba(0, 242, 255, 0.5));
        }
        
        .character-body {
            width: 60px;
            height: 100px;
            background: linear-gradient(to bottom, #4a4aff, #2a2acc);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 30px;
            animation: float 3s ease-in-out infinite;
        }
        
        .character-head {
            width: 40px;
            height: 40px;
            background: linear-gradient(to bottom, #ffcc00, #ff9900);
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.5);
        }
        
        .character-weapon {
            position: absolute;
            top: 40%;
            right: -30px;
            width: 80px;
            height: 20px;
            background: linear-gradient(to right, #ff3333, #ff6666);
            border-radius: 10px;
            transform: rotate(15deg);
            animation: weaponGlow 2s infinite;
        }
        
        @keyframes weaponGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 51, 51, 0.5); }
            50% { box-shadow: 0 0 20px rgba(255, 51, 51, 0.8); }
        }
        
        /* æ•Œäºº/ç›®æ ‡ */
        .enemy {
            position: absolute;
            top: 40%;
            right: 20%;
            width: 60px;
            height: 60px;
            background: linear-gradient(to bottom, #ff3333, #cc0000);
            border-radius: 50%;
            z-index: 4;
            animation: enemyFloat 4s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
        }
        
        @keyframes enemyFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .enemy-eye {
            position: absolute;
            width: 10px;
            height: 15px;
            background: white;
            border-radius: 50%;
            top: 20px;
        }
        
        .enemy-eye.left { left: 15px; }
        .enemy-eye.right { right: 15px; }
        
        /* æ”»å‡»ç‰¹æ•ˆ */
        .attack-effect {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--neon-blue);
            border-radius: 50%;
            z-index: 6;
            filter: blur(2px);
            box-shadow: 0 0 10px var(--neon-blue);
            animation: attackMove 1s linear forwards;
        }
        
        @keyframes attackMove {
            0% { transform: translate(0, 0); opacity: 1; }
            100% { transform: translate(100px, -50px); opacity: 0; }
        }
        
        /* åˆ†æ•°/UIæ˜¾ç¤º */
        .game-ui {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .game-score {
            font-size: 1.2rem;
            font-weight: 900;
            color: var(--neon-blue);
            text-shadow: 0 0 10px rgba(0, 242, 255, 0.5);
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 15px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
        }
        
        .game-level {
            font-size: 1rem;
            font-weight: bold;
            color: var(--neon-orange);
            text-shadow: 0 0 10px rgba(255, 123, 0, 0.5);
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 15px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
        }
        
        /* æ¸¸æˆæ§åˆ¶åŒºåŸŸ */
        .game-controls {
            position: absolute;
            bottom: 40px;
            width: 100%;
            padding: 0 30px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            z-index: 10;
        }
        
        .joystick-area {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            position: relative;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        .joystick-handle {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            position: absolute;
            top: 35px;
            left: 35px;
            box-shadow: 0 0 15px white;
            transition: transform 0.1s;
        }
        
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .action-btn {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 1.2rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border: 2px solid rgba(255, 255, 255, 0.4);
            color: white;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.1s;
            user-select: none;
        }
        
        .action-btn:active {
            transform: scale(0.9);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
        }
        
        .action-btn.special {
            color: var(--neon-blue);
            border-color: var(--neon-blue);
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.3);
        }
        
        .action-btn.special:active {
            box-shadow: 0 0 25px rgba(0, 242, 255, 0.6);
        }

        /* --- ç»“ç®—é¡µ (Settlement) --- */
        .settle-container { padding: 50px 25px; text-align: center; }
        .settle-icon { font-size: 5rem; margin-bottom: 20px; filter: drop-shadow(0 0 20px rgba(255,255,255,0.3)); animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        .card-option {
            /* æ¯›ç»ç’ƒå¡ç‰‡ */
            background: var(--glass-bg); backdrop-filter: var(--glass-blur); border: 1px solid var(--glass-border);
            padding: 25px; border-radius: 20px; text-align: left; margin-bottom: 25px; position: relative; overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card-option:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        
        /* ä¸»æ¨å¡ç‰‡ï¼šæ©™è‰²éœ“è™¹é£æ ¼ */
        .card-option.primary { 
            border-color: var(--neon-orange);
            background: linear-gradient(135deg, rgba(255, 123, 0, 0.1), rgba(20, 10, 40, 0.8));
            box-shadow: 0 0 30px rgba(255, 123, 0, 0.15) inset;
        }
        .card-option h3 { margin: 0 0 10px; font-size: 1.3rem; }
        .card-option.primary h3 { color: var(--neon-orange); text-shadow: 0 0 10px rgba(255, 123, 0, 0.5); }
        
        .btn-full { width: 100%; padding: 15px; border-radius: 12px; border: none; font-weight: 900; font-size: 1.1rem; cursor: pointer; }
        .btn-gold { 
            background: var(--btn-buy-grad); color: white; 
            box-shadow: 0 5px 20px rgba(255, 77, 77, 0.4);
        }
        .btn-outline { 
            background: rgba(255,255,255,0.05); border: 2px solid rgba(255,255,255,0.3); color: var(--text-main);
            box-shadow: 0 0 15px rgba(255,255,255,0.1) inset;
        }

        .toast {
            background: rgba(20, 10, 40, 0.9); backdrop-filter: blur(20px);
            border: 1px solid var(--neon-blue); color: var(--neon-blue);
            font-weight: bold; box-shadow: 0 5px 30px rgba(0,0,0,0.5);
        }
        
        /* é€€å‡ºç¡®è®¤å¼¹çª— */
        .exit-modal {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }
        
        .exit-modal-content {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            width: 300px;
            text-align: center;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }
        
        .exit-modal h3 {
            margin-top: 0;
            font-size: 1.5rem;
            color: var(--neon-blue);
            text-shadow: 0 0 10px rgba(0, 242, 255, 0.5);
        }
        
        .exit-modal p {
            color: var(--text-sub);
            margin-bottom: 25px;
            line-height: 1.5;
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .modal-btn {
            padding: 12px 25px;
            border-radius: 12px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
        }
        
        .modal-btn.cancel {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .modal-btn.cancel:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .modal-btn.exit {
            background: linear-gradient(90deg, #ff3333, #ff6666);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 51, 51, 0.4);
        }
        
        .modal-btn.exit:hover {
            box-shadow: 0 5px 20px rgba(255, 51, 51, 0.6);
        }

    </style>
</head>
<body>

<div id="app-container">
    
    <div id="page-home" class="page active">
        <div class="navbar">
            <div class="logo">è¯•ç©å¹³å°demo</div>
            <div style="font-size:1.2rem; filter: drop-shadow(0 0 5px var(--neon-blue))">ğŸ”</div>
        </div>
        <div class="hero-banner" onclick="showGameDetail('wukong')">
            <div class="hero-tag">ä»Šæ—¥åŠ›è</div>
            <div class="hero-text">
                <h2 style="font-weight:900; font-size:1.8rem">é»‘ç¥è¯ï¼šæ‚Ÿç©º</h2>
            </div>
        </div>
        <div class="icon-grid">
            <div class="icon-item"><div class="icon-box" style="color:#ff4d4d; border-color:rgba(255, 77, 77, 0.3)">ğŸ®</div>æ–°æ¸¸</div>
            <div class="icon-item"><div class="icon-box" style="color:#FFD700; border-color:rgba(255, 215, 0, 0.3)">ğŸ†</div>æ’è¡Œ</div>
            <div class="icon-item"><div class="icon-box" style="color:#00f2ff; border-color:rgba(0, 242, 255, 0.3)">ğŸ’ </div>é’±åŒ…</div>
            <div class="icon-item"><div class="icon-box" style="color:#bd00ff; border-color:rgba(189, 0, 255, 0.3)">ğŸ</div>ç¦åˆ©</div>
        </div>
        <div style="padding: 0 20px 80px;">
            <h3 style="margin-bottom:15px; font-weight:900">çƒ­é—¨è¯•ç©</h3>
            <!-- æ¸¸æˆå¡ç‰‡1 - ç‚¹å‡»æ•´ä¸ªå¡ç‰‡å¯è·³è½¬ -->
            <div class="game-card glass" onclick="showGameDetail('cyberpunk')">
                <img src="https://picsum.photos/id/1033/100/100" class="game-thumb">
                <div class="game-info" style="flex:1">
                    <span class="game-title" style="font-weight:bold; font-size:1.1rem">èµ›åšæœ‹å…‹ 2077</span>
                    <div>
                        <span class="game-tag">å¼€æ”¾ä¸–ç•Œ | åŠ¨ä½œ</span>
                        <span class="lowest-price-tag">å²ä½</span>
                    </div>
                </div>
                <button class="btn-try-sm" onclick="event.stopPropagation(); showGameDetail('cyberpunk')">âš¡ï¸ ç§’ç©</button>
            </div>
            <!-- æ¸¸æˆå¡ç‰‡2 - ç‚¹å‡»æ•´ä¸ªå¡ç‰‡å¯è·³è½¬ -->
            <div class="game-card glass" onclick="showGameDetail('elden-ring')">
                <img src="https://picsum.photos/id/1035/100/100" class="game-thumb">
                <div class="game-info" style="flex:1">
                    <span class="game-title" style="font-weight:bold; font-size:1.1rem">è‰¾å°”ç™»æ³•ç¯</span>
                    <div>
                        <span class="game-tag">é­‚ç±» | 3Aå¤§ä½œ</span>
                        <span class="lowest-price-tag">å²ä½</span>
                    </div>
                </div>
                <button class="btn-try-sm" onclick="event.stopPropagation(); showGameDetail('elden-ring')">âš¡ï¸ ç§’ç©</button>
            </div>
        </div>
    </div>

    <div id="page-detail" class="page">
        <div class="navbar" style="background:transparent; border:none">
            <div onclick="showPage('home')" style="cursor:pointer; padding:5px 10px; background:rgba(0,0,0,0.5); border-radius:20px; backdrop-filter:blur(5px)">â† è¿”å›</div>
        </div>
        <div class="detail-header" id="detail-header">
            <!-- èƒŒæ™¯å›¾ä¼šé€šè¿‡JavaScriptåŠ¨æ€è®¾ç½® -->
            <div class="play-btn-overlay">â–¶</div>
        </div>
        <div class="detail-content">
            <div class="detail-title" id="detail-title">é»‘ç¥è¯ï¼šæ‚Ÿç©º</div>
            
            <!-- ä»·æ ¼ä¿¡æ¯åŒºåŸŸ -->
            <div class="detail-price-info" id="detail-price-info">
                <!-- è¿™é‡Œä¼šé€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
            </div>
            
            <div class="detail-tags" id="detail-tags">
                <span>ğŸ”¥ çƒ­é—¨æ¦œTOP1</span>
                <span style="color:var(--neon-blue); background:rgba(0, 242, 255, 0.15)">ğŸ® æ”¯æŒæ‰‹æŸ„</span>
            </div>
            <div class="detail-desc" id="detail-desc" style="margin-top:20px; line-height:1.6; color:var(--text-sub)">
                è¸ä¸Šå–ç»ä¹‹è·¯ï¼Œä½“éªŒæ¬¡ä¸–ä»£å›½é£åŠ¨ä½œå·…å³°ã€‚æ— éœ€ä¸‹è½½é…ç½®ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œåˆ©ç”¨äº‘ç«¯ç®—åŠ›ç«‹å³å¼€å¯é™å¦–é™¤é­”ä¹‹æ—…ã€‚
                <br><br>
            </div>
        </div>
        <div class="sticky-footer">
            <button class="btn-buy" onclick="clickConversion('steam')">å»Steamè´­ä¹°</button>
            <button class="btn-try-lg" onclick="startTrial()">ğŸš€ ç«‹å³å…è´¹è¯•ç©</button>
        </div>
    </div>

    <div id="page-gameplay" class="page">
        <!-- é€€å‡ºç¡®è®¤å¼¹çª— -->
        <div id="exit-modal" class="exit-modal">
            <div class="exit-modal-content">
                <h3>é€€å‡ºè¯•ç©ï¼Ÿ</h3>
                <p>æ‚¨çš„è¯•ç©æ—¶é•¿è¿˜æœ‰ <span id="remaining-time">39:59</span>ï¼Œç¡®å®šè¦é€€å‡ºå—ï¼Ÿ</p>
                <div class="modal-buttons">
                    <button class="modal-btn cancel" onclick="hideExitModal()">å–æ¶ˆ</button>
                    <button class="modal-btn exit" onclick="exitToDetail()">é€€å‡ºè¯•ç©</button>
                </div>
            </div>
        </div>
        
        <!-- æ¸¸æˆåœºæ™¯å®¹å™¨ -->
        <div class="gameplay-scene">
            <!-- æ¸¸æˆèƒŒæ™¯ -->
            <div class="game-background"></div>
            
            <!-- æ˜Ÿç©ºæ•ˆæœ -->
            <div class="stars" id="stars"></div>
            
            <!-- ç²’å­æ•ˆæœ -->
            <div class="particles" id="particles"></div>
            
            <!-- æ¸¸æˆè§’è‰² -->
            <div class="game-character">
                <div class="character-head"></div>
                <div class="character-body"></div>
                <div class="character-weapon"></div>
            </div>
            
            <!-- æ•Œäºº -->
            <div class="enemy">
                <div class="enemy-eye left"></div>
                <div class="enemy-eye right"></div>
            </div>
            
            <!-- æ¸¸æˆUI -->
            <div class="game-ui">
                <div class="game-score">åˆ†æ•°: <span id="score">0</span></div>
                <div class="game-level">ç­‰çº§: <span id="level">1</span></div>
            </div>
            
            <!-- é¡¶éƒ¨æ§åˆ¶æ  -->
            <div class="gameplay-top-bar">
                <button class="exit-game-btn" onclick="showExitModal()">
                    <span>âï¸</span> é€€å‡ºæ¸¸æˆ
                </button>
                <div id="game-timer" class="timer-float">å‰©ä½™æ—¶é•¿: 39:59</div>
            </div>
            
            <!-- æ¸¸æˆæ§åˆ¶åŒºåŸŸ -->
            <div class="game-controls">
                <div class="joystick-area">
                    <div class="joystick-handle" id="joystick-handle"></div>
                </div>
                
                <div class="action-buttons">
                    <div class="action-btn" onclick="performAction('Y')">Y</div>
                    <div class="action-btn" onclick="performAction('X')">X</div>
                    <div class="action-btn" onclick="performAction('B')">B</div>
                    <div class="action-btn special" onclick="performAction('A')">A</div>
                </div>
            </div>
        </div>
    </div>

    <div id="page-settle" class="page">
        <div class="settle-container">
            <div class="settle-icon">ğŸ‰</div>
            <h2 style="font-size:2rem; font-weight:900; margin-bottom:10px">è¯•ç©ç»“æŸ!</h2>
            <p style="color:#aaa; margin-bottom:40px; font-weight:bold">æœ¬æ¬¡é«˜å…‰ä½“éªŒï¼š40åˆ†é’Ÿ</p>
            
            <div class="card-option primary" onclick="clickConversion('steam_settle')">
                <div style="position:absolute; top:0; right:0; background:var(--btn-buy-grad); color:white; font-size:0.8rem; padding:6px 12px; border-radius:0 20px 0 20px; font-weight:bold; box-shadow: -5px 5px 15px rgba(0,0,0,0.2)">è¶…å€¼æ¨è</div>
                <h3>æ„çŠ¹æœªå°½ï¼Ÿå…¥åº“æ°¸ä¹…ç©</h3>
                <p>å» Steam ä¸‹è½½æ­£å¼ç‰ˆï¼Œäº«å—å®Œæ•´å‰§æƒ…ä¸å­˜æ¡£ï¼Œæ— éœ€å†æ’é˜Ÿã€‚</p>
                <button class="btn-full btn-gold">ğŸš€ å» Steam ä¸‹è½½æ­£å¼ç‰ˆ</button>
            </div>

            <div class="card-option" onclick="clickConversion('cloud_pay')">
                <h3>ç”µè„‘å¸¦ä¸åŠ¨ï¼Ÿç»§ç»­äº‘ç©</h3>
                <p>è´­ä¹°äº‘æ¸¸æ—¶é•¿åŒ…æˆ–åŒ…æœˆä¼šå‘˜ï¼Œä½é…ä¹Ÿèƒ½ç•…ç©å¤§ä½œã€‚</p>
                <button class="btn-full btn-outline">ğŸ’ è´­ä¹°äº‘æ¸¸æ—¶é•¿</button>
            </div>

            <div class="back-home" onclick="showPage('home')" style="margin-top:40px; color:var(--text-sub); text-decoration:underline; font-weight:bold; cursor:pointer">è¿”å›é¦–é¡µ</div>
        </div>
    </div>

    <div id="toast" class="toast" style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); padding:15px 30px; border-radius:50px; display:none; z-index:100; text-align:center; white-space:nowrap">æ“ä½œæˆåŠŸ</div>

</div>

<script>
    // æ¸¸æˆæ•°æ®å¯¹è±¡ - å¢åŠ ä»·æ ¼ä¿¡æ¯
    const gameData = {
        'wukong': {
            title: 'é»‘ç¥è¯ï¼šæ‚Ÿç©º',
            image: 'https://picsum.photos/id/1002/600/400',
            tags: ['ğŸ”¥ çƒ­é—¨æ¦œTOP1', 'ğŸ® æ”¯æŒæ‰‹æŸ„', 'ğŸ‡¨ğŸ‡³ å›½äº§ä¹‹å…‰'],
            description: 'è¸ä¸Šå–ç»ä¹‹è·¯ï¼Œä½“éªŒæ¬¡ä¸–ä»£å›½é£åŠ¨ä½œå·…å³°ã€‚æ— éœ€ä¸‹è½½é…ç½®ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œåˆ©ç”¨äº‘ç«¯ç®—åŠ›ç«‹å³å¼€å¯é™å¦–é™¤é­”ä¹‹æ—…ã€‚',
            currentPrice: 268,
            originalPrice: 298,
            lowestPrice: 80,
            hasLowestPrice: false // æ‚Ÿç©ºå¯èƒ½è¿˜æ²¡æœ‰å²ä½ä»·
        },
        'cyberpunk': {
            title: 'èµ›åšæœ‹å…‹ 2077',
            image: 'https://picsum.photos/id/1033/600/400',
            tags: ['ğŸ”® æœªæ¥ç§‘æŠ€', 'ğŸ® æ”¯æŒæ‰‹æŸ„', 'âš¡ï¸ å¼€æ”¾ä¸–ç•Œ'],
            description: 'å¤œä¹‹åŸç­‰å¾…æ‚¨çš„æ¢ç´¢ï¼åœ¨è¿™åº§åºå¤§çš„æœªæ¥éƒ½å¸‚ä¸­ï¼Œä½“éªŒæ²‰æµ¸å¼èµ›åšæœ‹å…‹å†’é™©ã€‚æ— éœ€é«˜ç«¯é…ç½®ï¼Œäº‘ç«¯å³åˆ»ç•…ç©ã€‚',
            currentPrice: 149,
            originalPrice: 298,
            lowestPrice: 80,
            hasLowestPrice: true
        },
        'elden-ring': {
            title: 'è‰¾å°”ç™»æ³•ç¯',
            image: 'https://picsum.photos/id/1035/600/400',
            tags: ['âš”ï¸ é­‚ç±»å¤§ä½œ', 'ğŸ® æ”¯æŒæ‰‹æŸ„', 'ğŸ† TGAå¹´åº¦æ¸¸æˆ'],
            description: 'è¸å…¥äº¤ç•Œåœ°ï¼Œå¼€å¯å²è¯—èˆ¬çš„å¼€æ”¾ä¸–ç•Œå†’é™©ã€‚æŒ‘æˆ˜å¼ºå¤§æ•Œäººï¼Œæ¢ç´¢ç¥ç§˜åœ°ä¸‹åŸã€‚äº‘ç«¯ç®—åŠ›åŠ©æ‚¨è½»æ¾ä½“éªŒç¡¬æ ¸é­‚ç±»æ¸¸æˆé­…åŠ›ã€‚',
            currentPrice: 298,
            originalPrice: 398,
            lowestPrice: 120,
            hasLowestPrice: true
        }
    };

    // å½“å‰é€‰ä¸­çš„æ¸¸æˆID
    let currentGameId = 'wukong';
    // å…¨å±€è®¡æ—¶å™¨å˜é‡
    let timerInterval;
    // å‰©ä½™ç§’æ•°
    let remainingSeconds = 10; // æ¼”ç¤ºç”¨10ç§’
    // æ¸¸æˆåˆ†æ•°
    let gameScore = 0;
    // æ¸¸æˆç­‰çº§
    let gameLevel = 1;
    // æ‘‡æ†çŠ¶æ€
    let isJoystickActive = false;
    let joystickStartX = 0;
    let joystickStartY = 0;
    let joystickHandle = null;

    function showPage(pageId) {
        document.querySelectorAll('.page').forEach(el => el.classList.remove('active'));
        document.getElementById('page-' + pageId).classList.add('active');
        
        // å¦‚æœè¿›å…¥æ¸¸æˆé¡µé¢ï¼Œåˆå§‹åŒ–æ¸¸æˆåœºæ™¯
        if (pageId === 'gameplay') {
            setTimeout(() => {
                createStars();
                createParticles();
                initJoystick();
            }, 100);
        }
    }

    // æ˜¾ç¤ºæ¸¸æˆè¯¦æƒ…é¡µ
    function showGameDetail(gameId) {
        currentGameId = gameId;
        const game = gameData[gameId];
        
        // æ›´æ–°è¯¦æƒ…é¡µå†…å®¹
        document.getElementById('detail-title').textContent = game.title;
        document.getElementById('detail-header').style.backgroundImage = `url('${game.image}')`;
        
        // æ›´æ–°æ ‡ç­¾
        const tagsContainer = document.getElementById('detail-tags');
        tagsContainer.innerHTML = '';
        game.tags.forEach(tag => {
            const tagSpan = document.createElement('span');
            tagSpan.textContent = tag;
            // ç¬¬äºŒä¸ªæ ‡ç­¾ç‰¹æ®Šæ ·å¼ï¼ˆè“è‰²ï¼‰
            if (game.tags.indexOf(tag) === 1) {
                tagSpan.style.color = 'var(--neon-blue)';
                tagSpan.style.background = 'rgba(0, 242, 255, 0.15)';
            }
            tagsContainer.appendChild(tagSpan);
        });
        
        // æ›´æ–°æè¿°
        document.getElementById('detail-desc').innerHTML = game.description + '<br><br>';
        
        // æ›´æ–°ä»·æ ¼ä¿¡æ¯
        updatePriceInfo(game);
        
        // æ˜¾ç¤ºè¯¦æƒ…é¡µ
        showPage('detail');
        
        // è®°å½•åŸ‹ç‚¹
        console.log(`ç”¨æˆ·ç‚¹å‡»äº†æ¸¸æˆ: ${game.title} (ID: ${gameId})`);
    }
    
    // æ›´æ–°ä»·æ ¼ä¿¡æ¯
    function updatePriceInfo(game) {
        const priceContainer = document.getElementById('detail-price-info');
        priceContainer.innerHTML = '';
        
        // åˆ›å»ºå½“å‰ä»·æ ¼å…ƒç´ 
        const currentPriceEl = document.createElement('div');
        currentPriceEl.className = 'current-price';
        currentPriceEl.textContent = `ï¿¥${game.currentPrice}`;
        
        // åˆ›å»ºåŸä»·å…ƒç´ ï¼ˆå¦‚æœæœ‰æŠ˜æ‰£ï¼‰
        if (game.originalPrice > game.currentPrice) {
            const originalPriceEl = document.createElement('div');
            originalPriceEl.className = 'original-price';
            originalPriceEl.textContent = `åŸä»·ï¿¥${game.originalPrice}`;
            priceContainer.appendChild(originalPriceEl);
        }
        
        priceContainer.appendChild(currentPriceEl);
        
        // åˆ›å»ºå²ä½ä»·æ ‡ç­¾ï¼ˆå¦‚æœæ¸¸æˆæœ‰å²ä½ä»·ï¼‰
        if (game.hasLowestPrice) {
            const lowestPriceBadge = document.createElement('div');
            lowestPriceBadge.className = 'lowest-price-badge';
            lowestPriceBadge.textContent = `å²ä½`;
            priceContainer.appendChild(lowestPriceBadge);
        }
    }

    function startTrial() {
        // ç›´æ¥è¿›å…¥æ¸¸æˆï¼Œæ— éœ€æ’é˜Ÿ
        enterGame();
    }

    function enterGame() {
        showPage('gameplay');
        startTimer();
        resetGameStats();
        showToast("ğŸ® æ¸¸æˆåŠ è½½ä¸­...");
        
        // æ¨¡æ‹Ÿæ¸¸æˆåŠ è½½å®Œæˆ
        setTimeout(() => {
            showToast("ğŸš€ æ¸¸æˆå¼€å§‹ï¼");
        }, 500);
    }

    function startTimer() {
        remainingSeconds = 10; // é‡ç½®ä¸º10ç§’
        const timerEl = document.getElementById('game-timer');
        timerEl.classList.remove('danger');
        clearInterval(timerInterval);
        updateTimerDisplay();
        
        timerInterval = setInterval(() => {
            remainingSeconds--;
            updateTimerDisplay();
            
            if(remainingSeconds <= 5) timerEl.classList.add('danger');
            if(remainingSeconds <= 0) {
                clearInterval(timerInterval);
                showPage('settle');
            }
        }, 1000);
    }
    
    function updateTimerDisplay() {
        const m = Math.floor(remainingSeconds / 60).toString().padStart(2, '0');
        const s = (remainingSeconds % 60).toString().padStart(2, '0');
        document.getElementById('game-timer').innerText = `å‰©ä½™æ—¶é•¿: ${m}:${s}`;
        
        // æ›´æ–°é€€å‡ºç¡®è®¤å¼¹çª—ä¸­çš„å‰©ä½™æ—¶é—´
        const exitModalTime = document.getElementById('remaining-time');
        if (exitModalTime) {
            exitModalTime.innerText = `${m}:${s}`;
        }
    }
    
    function resetGameStats() {
        gameScore = 0;
        gameLevel = 1;
        document.getElementById('score').textContent = gameScore;
        document.getElementById('level').textContent = gameLevel;
    }
    
    // åˆ›å»ºæ˜Ÿç©ºæ•ˆæœ
    function createStars() {
        const starsContainer = document.getElementById('stars');
        starsContainer.innerHTML = '';
        
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            
            // éšæœºå¤§å°
            const size = Math.random() * 3;
            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            
            // éšæœºä½ç½®
            star.style.top = `${Math.random() * 100}%`;
            star.style.left = `${Math.random() * 100}%`;
            
            // éšæœºé—ªçƒå»¶è¿Ÿ
            star.style.animationDelay = `${Math.random() * 3}s`;
            
            starsContainer.appendChild(star);
        }
    }
    
    // åˆ›å»ºç²’å­æ•ˆæœ
    function createParticles() {
        const particlesContainer = document.getElementById('particles');
        particlesContainer.innerHTML = '';
        
        for (let i = 0; i < 30; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            // éšæœºä½ç½®
            particle.style.top = `${Math.random() * 100}%`;
            particle.style.left = `${Math.random() * 100}%`;
            
            // éšæœºé¢œè‰²
            const colors = ['#00f2ff', '#bd00ff', '#ff7b00', '#ff3333'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            particle.style.backgroundColor = color;
            
            // éšæœºå¤§å°
            const size = Math.random() * 4 + 1;
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            
            // éšæœºåŠ¨ç”»
            particle.style.animation = `moveParticle ${Math.random() * 5 + 3}s linear infinite`;
            particle.style.animationDelay = `${Math.random() * 2}s`;
            
            particlesContainer.appendChild(particle);
        }
        
        // æ·»åŠ CSSåŠ¨ç”»
        if (!document.getElementById('particle-animation')) {
            const style = document.createElement('style');
            style.id = 'particle-animation';
            style.textContent = `
                @keyframes moveParticle {
                    0% { transform: translate(0, 0); opacity: 0; }
                    10% { opacity: 0.7; }
                    90% { opacity: 0.7; }
                    100% { transform: translate(${Math.random() * 100 - 50}px, ${Math.random() * 100 - 50}px); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        }
    }
    
    // åˆå§‹åŒ–æ‘‡æ†æ§åˆ¶
    function initJoystick() {
        joystickHandle = document.getElementById('joystick-handle');
        const joystickArea = document.querySelector('.joystick-area');
        
        joystickHandle.addEventListener('touchstart', handleJoystickStart);
        joystickHandle.addEventListener('mousedown', handleJoystickStart);
        
        document.addEventListener('touchmove', handleJoystickMove);
        document.addEventListener('mousemove', handleJoystickMove);
        
        document.addEventListener('touchend', handleJoystickEnd);
        document.addEventListener('mouseup', handleJoystickEnd);
        
        function handleJoystickStart(e) {
            e.preventDefault();
            isJoystickActive = true;
            
            const rect = joystickArea.getBoundingClientRect();
            joystickStartX = rect.left + rect.width / 2;
            joystickStartY = rect.top + rect.height / 2;
            
            // æ·»åŠ æ´»è·ƒæ ·å¼
            joystickArea.style.borderColor = 'rgba(0, 242, 255, 0.6)';
            joystickArea.style.boxShadow = '0 0 30px rgba(0, 242, 255, 0.3)';
            joystickHandle.style.background = 'rgba(255, 255, 255, 1)';
            joystickHandle.style.boxShadow = '0 0 20px white';
        }
        
        function handleJoystickMove(e) {
            if (!isJoystickActive) return;
            
            e.preventDefault();
            
            let clientX, clientY;
            if (e.type === 'touchmove') {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            } else {
                clientX = e.clientX;
                clientY = e.clientY;
            }
            
            const rect = joystickArea.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            // è®¡ç®—åç§»é‡
            let deltaX = clientX - centerX;
            let deltaY = clientY - centerY;
            
            // é™åˆ¶åœ¨æ‘‡æ†åŒºåŸŸå†…
            const maxDistance = 35; // æœ€å¤§ç§»åŠ¨è·ç¦»
            const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            
            if (distance > maxDistance) {
                deltaX = (deltaX / distance) * maxDistance;
                deltaY = (deltaY / distance) * maxDistance;
            }
            
            // æ›´æ–°æ‘‡æ†ä½ç½®
            joystickHandle.style.transform = `translate(${deltaX}px, ${deltaY}px)`;
            
            // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ¸¸æˆè§’è‰²ç§»åŠ¨é€»è¾‘
            // æ ¹æ®deltaXå’ŒdeltaYæ§åˆ¶è§’è‰²ç§»åŠ¨
        }
        
        function handleJoystickEnd() {
            if (!isJoystickActive) return;
            
            isJoystickActive = false;
            
            // é‡ç½®æ‘‡æ†ä½ç½®
            joystickHandle.style.transform = 'translate(0, 0)';
            
            // ç§»é™¤æ´»è·ƒæ ·å¼
            joystickArea.style.borderColor = 'rgba(255, 255, 255, 0.2)';
            joystickArea.style.boxShadow = '0 0 20px rgba(0, 0, 0, 0.5)';
            joystickHandle.style.background = 'rgba(255, 255, 255, 0.8)';
            joystickHandle.style.boxShadow = '0 0 15px white';
        }
    }
    
    // æ‰§è¡ŒåŠ¨ä½œï¼ˆæŒ‰é’®ç‚¹å‡»ï¼‰
    function performAction(button) {
        console.log(`æ‰§è¡ŒåŠ¨ä½œ: ${button}æŒ‰é’®`);
        
        // å¢åŠ åˆ†æ•°
        gameScore += 10;
        document.getElementById('score').textContent = gameScore;
        
        // æ¯100åˆ†å‡ä¸€çº§
        if (gameScore >= gameLevel * 100) {
            gameLevel++;
            document.getElementById('level').textContent = gameLevel;
            showToast(`ğŸ® å‡çº§åˆ°ç­‰çº§ ${gameLevel}!`);
        }
        
        // åˆ›å»ºæ”»å‡»ç‰¹æ•ˆ
        createAttackEffect(button);
        
        // æŒ‰é’®åé¦ˆæ•ˆæœ
        const btn = event.target;
        btn.style.transform = 'scale(0.9)';
        btn.style.background = 'rgba(255, 255, 255, 0.2)';
        
        setTimeout(() => {
            btn.style.transform = '';
            btn.style.background = '';
        }, 100);
    }
    
    // åˆ›å»ºæ”»å‡»ç‰¹æ•ˆ
    function createAttackEffect(button) {
        const scene = document.querySelector('.gameplay-scene');
        const effect = document.createElement('div');
        effect.className = 'attack-effect';
        
        // æ ¹æ®æŒ‰é’®è®¾ç½®ä¸åŒé¢œè‰²
        const colors = {
            'A': '#00f2ff',
            'B': '#ff3333',
            'X': '#ff7b00',
            'Y': '#bd00ff'
        };
        
        effect.style.backgroundColor = colors[button] || '#00f2ff';
        effect.style.boxShadow = `0 0 15px ${colors[button] || '#00f2ff'}`;
        
        // ä»è§’è‰²ä½ç½®å¼€å§‹
        effect.style.left = '30%';
        effect.style.top = '50%';
        
        scene.appendChild(effect);
        
        // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
        setTimeout(() => {
            effect.remove();
        }, 1000);
    }

    // æ˜¾ç¤ºé€€å‡ºç¡®è®¤å¼¹çª—
    function showExitModal() {
        const modal = document.getElementById('exit-modal');
        modal.style.display = 'flex';
        // æ›´æ–°å¼¹çª—ä¸­çš„å‰©ä½™æ—¶é—´
        updateTimerDisplay();
    }
    
    // éšè—é€€å‡ºç¡®è®¤å¼¹çª—
    function hideExitModal() {
        const modal = document.getElementById('exit-modal');
        modal.style.display = 'none';
    }
    
    // é€€å‡ºæ¸¸æˆå¹¶è¿”å›è¯¦æƒ…é¡µ
    function exitToDetail() {
        // æ¸…é™¤è®¡æ—¶å™¨
        clearInterval(timerInterval);
        
        // æ˜¾ç¤ºé€€å‡ºæç¤º
        showToast("ğŸ•¹ï¸ å·²é€€å‡ºæ¸¸æˆï¼Œè¿”å›è¯¦æƒ…é¡µ");
        
        // éšè—é€€å‡ºç¡®è®¤å¼¹çª—
        hideExitModal();
        
        // å»¶è¿Ÿä¸€ä¸‹å†è¿”å›è¯¦æƒ…é¡µï¼Œè®©ç”¨æˆ·çœ‹åˆ°æç¤º
        setTimeout(() => {
            // è¿”å›å½“å‰æ¸¸æˆçš„è¯¦æƒ…é¡µ
            showGameDetail(currentGameId);
            
            // è®°å½•é€€å‡ºè¡Œä¸º
            console.log(`ç”¨æˆ·é€€å‡ºäº†æ¸¸æˆ: ${gameData[currentGameId].title}, æœ€ç»ˆå¾—åˆ†: ${gameScore}`);
        }, 800);
    }

    function clickConversion(type) {
        console.log("åŸ‹ç‚¹: conversion_jump, type=" + type);
        if(type === 'steam' || type === 'steam_settle') {
            showToast("ğŸš€ æ­£åœ¨å‰å¾€ Steam å•†åº—...");
        } else if (type === 'cloud_pay') {
            showToast("ğŸ’ æ­£åœ¨å”¤èµ·æ”¶é“¶å°...");
        } else {
            showToast("è·³è½¬ä¸­...");
        }
    }

    function showToast(msg) {
        const t = document.getElementById('toast');
        t.innerText = msg;
        t.style.display = 'block';
        setTimeout(() => { t.style.display = 'none'; }, 2000);
    }
</script>

</body>
</html>